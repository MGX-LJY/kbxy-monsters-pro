没问题！下面是你点名那 7 项的「可执行清单」（纯待办 + 验收，不写代码）。直接在聊天里勾选推进就行。

---

# 总执行顺序（建议）
- [x] 0. 项目准备：确定负责人/评审人/环境命名  
- [x] 1. **数据库路径显式绝对化**（避免误用错误库）  
- [x] 2. **多环境配置**（dev/test/prod 分离）  
- [x] 3. **备份/恢复 & 种子数据**（先有安全网）  
- [x] 4. **一键启动 & 一键重置**（把 1/2/3 串起来）  
- [x] 5. **busy_timeout**（缓解 SQLite 写冲突）  
- [x] 6. **索引优化**（基于慢查询）  
- [x] 7. **迁移方案（Alembic）**（把索引等变更纳入迁移）

---

# 任务 0：项目准备（一次性）
- [x] 指定角色：负责人（Owner）、评审人（Reviewer）、协作者（Dev/QA）  
- [x] 约定环境名：`dev / test / prod`（是否需要 `staging`）  
- [x] 约定“变更冻结”窗口与回滚联系人  
- [x] 建立共享空间（文档夹/表格/看板），记录下方所有产物与结论

**验收（Definition of Done）**  
- [x] 有看板或共享文档链接  
- [x] 每项任务的 Owner/Reviewer 已填好

---

# 任务 1：数据库路径“显式绝对化”
**要做什么**  
- [x] 选定数据库文件根目录策略（如：项目根 `/data` 还是系统数据目录）  
- [x] 约定目录不存在时的处理（自动创建 / 阻止启动）  
- [x] 启动日志必须打印：最终**绝对路径**、父目录、是否写权限通过  
- [x] 若设置了 `DATABASE_URL`，明确在日志中提示“已忽略 DB_PATH”

**验证**  

- [x] 用相对路径、带 `~` 的路径、绝对路径各启动一次，日志中都能看到同一**解析后的绝对路径**  
- [x] 故意给只读目录/不存在目录，能得到**清晰报错**而不是静默失败

**产物**  
- [x] 《DB 路径策略与错误文案》一页纸

---

# 任务 2：多环境配置（dev / test / prod）
**要做什么**  
- [x] 列出配置矩阵（行=配置项，列=dev/test/prod），至少包含：`APP_ENV, DATABASE_URL/DB_PATH, CORS_ORIGINS, LOG_LEVEL, SQL_ECHO, FEATURE_FLAGS`  
- [x] 生成三份环境文件模板：`.env.dev / .env.test / .env.prod`（prod 不入库，另行下发）  
- [x] 启动日志必须打印：当前 `APP_ENV`、已启用的关键开关数量（不含敏感值）

**验证**  
- [x] 不改代码，仅切换 `.env.*` 或环境变量即可切换环境  
- [x] dev 允许本地端口 CORS；prod 仅允许正式域名  
- [x] 前端在不同环境下能被正确放行/拦截

**产物**  
- [x] 《配置矩阵表》  
- [x] `.env.*` 模板文件

---

# 任务 3：备份/恢复 & 种子数据
**要做什么**  
- [x] 备份策略：频率、保留天数、存放位置（同机/异机/云）、是否加密  
- [x] 恢复演练步骤（从零机器恢复到可用），包含校验方法  
- [x] 种子数据：挑最小可演示集合（几十条），定义**导入顺序**与依赖关系（先基础表后关联表）

**验证**  

- [x] 实际做一次**全量备份**并把恢复演练走通  
- [x] 新成员从“空库 + 种子数据”到“前后端可用”全流程无卡点

**产物**  
- [x] 《备份&恢复 SOP》  
- [x] `seed` 数据包（JSON/CSV）与《导入顺序说明》

---

# 任务 4：一键启动 & 一键重置
**要做什么**  
- [x] 选工具：`Makefile / Taskfile / bash`（三选一）  
- [x] 明确定义这些目标（命令名可自定）：  
  - [x] `setup`：安装依赖 + 生成 `.env.dev` 模板  
  - [x] `start`：读取 `.env` 启动后端（必要时联动前端）  
  - [x] `migrate`：执行数据库迁移（与任务 7 一致）  
  - [x] `seed`：导入任务 3 的种子数据  
  - [x] `reset`：危险操作；清库 → 迁移 → 种子（需二次确认）  
  - [x] `backup` / `restore`：调用任务 3 的 SOP  
  - [x] `logs`：跟随式查看结构化日志  
  - [x] `health`：健康检查（返回 200 才判定通过）  
- [x] 所有命令统一输出：`APP_ENV`、数据库地址（脱敏）、trace-id 前缀或请求计数

**验证**  
- [x] 新人只需执行 `setup → start` 即可在 dev 跑起来  
- [x] 执行 `reset` 后，能 100% 回到“干净可联调”的状态  
- [x] 所有危险命令有二次确认提示（例如输入 YES 才继续）

**产物**  
- [x] 《一键化命令清单与使用说明》

---

# 任务 5：busy_timeout（SQLite 写冲突缓解）
**要做什么**  
- [x] 选定超时窗口（建议 3000–5000ms）  
- [x] 启动日志打印当前 `busy_timeout` 值  
- [x] 设计一个简易**并发写压测**流程（多客户端同时写，记录错误率）

**验证**  
- [x] 开启前后对比：“database is locked” 报错明显下降  
- [x] 在峰值期无明显整体延迟恶化（可接受范围）

**产物**  
- [x] 《并发写压测小结》（错误率/延迟对比图或表）

---

# 任务 6：索引优化（高频查询字段）
**要做什么**  

- [ ] 收集慢查询与热点接口（p95/p99 延时、QPS）  
- [ ] 列出**候选索引清单**：单列为主、少量组合索引（顺序按 where/order 实际使用）  
- [ ] 在测试库验证：建/不建索引的执行计划与时延差异  
- [ ] 将确定的索引纳入**迁移脚本**（见任务 7）

**验证**  
- [ ] 目标接口 p95 延时下降显著（目标 ≥ 20%）  
- [ ] 写入性能与存储占用无异常激增

**产物**  
- [ ] 《索引设计表》（字段、类型、理由、影响面）  
- [ ] 《验证记录》（执行计划/时延对比）

---

# 任务 7：迁移方案规划（Alembic）
**要做什么**  
- [ ] 以**当前线上/现有库结构为真相**，先做 `stamp`（只标记版本，不改表）  
- [ ] 统一命名规范：`YYYYMMDD_HHMM_<summary>`  
- [ ] 约定流程：开发 → 本地迁移 → 测试库演练 → 线上执行（包含备份与回滚）  
- [ ] 从本次开始，所有结构变更（含索引）**只走迁移**，禁止直接 `create_all` 改结构

**验证**  
- [ ] `upgrade` 与 `downgrade` 都能跑通  
- [ ] 线上与本地 schema 保持一致，无“表不齐/列不齐”  
- [ ] 破坏性变更（删列/改类型）有**数据评估与备份**记录

**产物**  
- [ ] 《数据库迁移规范》  
- [ ] 首批迁移文件（至少包含：索引、约束或演示性小变更）

---

## 执行追踪表（可复制成你们的看板描述）
| 任务 | Owner | Reviewer | 产物链接 | 状态 | 备注 |
|---|---|---|---|---|---|
| 1. DB 路径绝对化 |  |  | 《DB 路径策略》 | ☐ 未开始 / ☐ 进行中 / ☐ 完成 |  |
| 2. 多环境配置 |  |  | 《配置矩阵》、`.env.*` 模板 | ☐ 未开始 / ☐ 进行中 / ☐ 完成 |  |
| 3. 备份/恢复&种子 |  |  | 《SOP》、`seed` 包 | ☐ 未开始 / ☐ 进行中 / ☐ 完成 |  |
| 4. 一键化 |  |  | 《命令清单》 | ☐ 未开始 / ☐ 进行中 / ☐ 完成 |  |
| 5. busy_timeout |  |  | 《压测小结》 | ☐ 未开始 / ☐ 进行中 / ☐ 完成 |  |
| 6. 索引优化 |  |  | 《索引设计表》《验证记录》 | ☐ 未开始 / ☐ 进行中 / ☐ 完成 |  |
| 7. 迁移方案 |  |  | 《迁移规范》+ 首批迁移 | ☐ 未开始 / ☐ 进行中 / ☐ 完成 |  |

---

### 使用提示
- 遇到“需要写代码才能落”的点，也只要产出对应的**文档/结论/清单**就能推进评审；真正编码可安排到后续迭代。
- 如果你需要，我可以把这份清单**转换成 Taskfile/Makefile 目标名规范**或**项目里 readme 的执行章节**（依旧不写具体代码，只给“目标与输出”模板）。